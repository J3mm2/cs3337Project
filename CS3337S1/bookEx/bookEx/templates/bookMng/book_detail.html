{% extends "base.html" %}
{% load static %}

{% block sidenav %}
   {% for item in item_list %}
      <li>
        <a href="{{ item.link }}">  {{ item.item }} </a>
      </li>
   {% endfor %}
{% endblock sidenav %}

{% block content %}
   <h1>Book Detail</h1>
   <table border="2" >
      <tr>
          <th>
              Book Picture
          </th>
          <th>
              Book Name
          </th>
          <th>
              Book Price
          </th>
          <th>
              User Name
          </th>
          <th>
              Book Post Date
          </th>
          <th>
              Book Web
          </th>
      </tr>
       <tr>
         <td>
           <img src="{% static book.pic_path %}" width="100" />
         </td>
         <td>
            {{ book.name }}
         </td>
         <td>
            {{ book.price }}
         </td>
          <td>
            {{ book.username }}
         </td>
           <td>
            {{ book.publishdate }}
         </td>
         <td>
               {{ book.web }}
         </td>
      </tr>
   </table>

    {% if user.is_authenticated %}
  <form action="{% url 'toggle_favorite' book_id=book.id %}" method="post" style="margin-top: 20px;">
    {% csrf_token %}
    <button type="submit" style="
      padding: 10px 16px;
      font-size: 16px;
      font-weight: bold;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      background-color: {% if is_favorite %}#ffe6e6{% else %}#e6f0ff{% endif %};
      color: {% if is_favorite %}#cc0000{% else %}#003366{% endif %};
      transition: 0.3s;
    ">
      {% if is_favorite %}
        ‚ù§Ô∏è Favorited ‚Äî Click to Remove
      {% else %}
        ü§ç Add to Favorites
      {% endif %}
    </button>
  </form>
{% else %}
  <p><a href="{% url 'login' %}?next={% url 'book_detail' book.id %}">Log in</a> to add this book to your favorites.</p>
{% endif %}

   <br><br>
   <a href="{% url 'displaybooks' %}">‚Üê Back to all books</a>
{% endblock content %}