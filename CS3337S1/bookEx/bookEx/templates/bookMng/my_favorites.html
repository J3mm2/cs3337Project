{% extends "base.html" %}
{% load static %}

{% block sidenav %}
    {% for item in item_list %}
        <li>
            <a href="{{ item.link }}">{{ item.item }}</a>
        </li>
    {% endfor %}
{% endblock sidenav %}

{% block content %}
<h2 class="text-center mb-4">My Favorite Books</h2>

<div class="table-container" style="overflow-x: auto;">
    <table class="book-table">
        <thead>
            <tr>
                <th>Book Cover</th>
                <th>Book Name</th>
                <th>Price</th>
                <th>Posted By</th>
                <th>Remove</th>
            </tr>
        </thead>
        <tbody>
            {% if books %}
                {% for book in books %}
                <tr>
                    <td>
                        <img src="{% static book.pic_path %}" alt="{{ book.name }}" width="70" height="100" style="object-fit: cover; border-radius: 6px;">
                    </td>
                    <td>
                        <a href="{% url 'book_detail' book.id %}" class="text-decoration-none text-dark fw-bold">
                            {{ book.name }}
                        </a>
                    </td>
                    <td>${{ book.price }}</td>
                    <td>{{ book.username }}</td>
                    <td>
                        <form method="post" action="{% url 'remove_favorites' book.id %}" onsubmit="return confirm('Are you sure you want to remove this book from your favorites?');">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-danger">Remove as Favorite</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            {% else %}
                <tr>
                    <td colspan="5" class="text-center text-muted">No books favorited.</td>
                </tr>
            {% endif %}
        </tbody>
    </table>
</div>
{% endblock content %}
